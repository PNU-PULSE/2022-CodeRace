# 달핑핑이 배열

### 문제

 바닷속의 고양이, 달팽이 핑핑이는 산책을 가던 중 사고가 나 등껍질이 깨지고 말았다. 달팽이 전문병원 원장으로써 등껍질을 고쳐주어야하는데, 문제가 발생했다. 핑핑이의 등껍질은 단순한 껍질이 아니라 특정한 패턴을 가지고 있다. 패턴에 맞지않게 고쳐줄 경우, 마취에서 깬 핑핑이가 당신을 가만두지 않을 것이다. 

 핑핑이의 등껍질 패턴은 흔히 잘알려진 달팽이배열의 규칙을 가진다. (0, 0)에서 시작하여 오른쪽으로 1씩 증가하며 채워나가게 되고, 배열의 끝을 만나거나 이미 채워진 cell을 만날 경우 아래로, 다시 왼쪽으로, 다시 위쪽으로 채워나가며 배열을 채운다. 자세한 그림은 아래와 같다.

 좌표 x, y는 왼쪽에서 x칸, 위에서 y칸 떨어짐을 의미한다.  핑핑이의 등껍질이 깨진 위치 x, y가 주어지면 해당 위치의 값을 찾는 프로그램을 작성하라.

### 입력

첫번째 줄에 배열의 크기 $n(3 ≤ n ≤ 100,000)$가 주어진다. 달팽이 배열이 $n x n$의 크기를 갖게 된다. **$n$은 홀수만 주어진다.**

두번째 줄에 쿼리의 개수 $q(1 ≤ q ≤ 100,000)$가 주어진다. 

다음 $q$줄에 $x y(0 ≤ x, y < n)$가 주어진다. 

### 출력

쿼리마다 x, y 위치의 배열 값을 출력한다.

- 정해
    
    구현 / adhoc
    
    **O(q)**
    
    쿼리당 O(1)풀이가 있음.
    
    ```cpp
    ll getValue(ll y, ll x) {
        ll p = min({x, y, n - x - 1, n - y - 1});
        ll q;
        if (x >= y) {
            q = x + y - 2 * p;
        } else {
            q = (n - 1 - 2 * p) * 4 - (x - p + y - p);
        }
        q += 4 * (p * n - p * p) + 1;
        return q;
    }
    ```
    
    위와 같은 정형화된 공식이 아니더라도 충분히 대회중에 풀이생각이 가능함.
    
    배열의 바깥쪽 부터 0번, 1번 껍질이라고 하면
    
    ```cpp
    min({x, y, n - x - 1, n - y - 1});
    ```
    
    로 O(1)에 각 쿼리가 어느 껍질인지 판단가능.
    
    (x, y)좌표 + 어느 껍질인지 구했으므로,
    
     해당 껍질의 시작 점(좌, 상단 첫 시작 점의 값, 껍질에서 가장 작은 값)을 알 수 있음. 
    
    이후 (x, y)좌표로 껍질에서 상, 하, 좌, 우 인지 위치 파악이 가능하므로 O(1)에 값을 예측할 수 있음.